(function(){"use strict";var e={5247:function(e,t,n){var o={};n.r(o),n.d(o,{SZ:function(){return Mn},Nn:function(){return Rn},JR:function(){return zn},Ld:function(){return $n},RY:function(){return Bn},ov:function(){return Dn},Sj:function(){return qn},hM:function(){return Pn},cp:function(){return Gn},ZQ:function(){return Un},UV:function(){return Yn},uv:function(){return Hn},Dl:function(){return Nn}});var a={};n.r(a),n.d(a,{QX:function(){return Eo},VQ:function(){return Do},Xm:function(){return Co},sy:function(){return No},Ei:function(){return Uo},y5:function(){return Mo},C$:function(){return Ro}});var i=n(9242),r=n(3396);const l={id:"hud"};function s(e,t){return(0,r.wg)(),(0,r.iD)("div",l,[(0,r.WI)(e.$slots,"default",{},void 0,!0)])}var c=n(89);const u={},g=(0,c.Z)(u,[["render",s],["__scopeId","data-v-52a7fc1f"]]);var f=g,d=n(4870);const m=()=>({img:null,loaded:!1}),p=(e,t)=>{e.img=new Image,e.img.src=t,e.img.onload=()=>e.loaded=!0},y={floor:m(),cave:m(),w2:m(),character:m(),spider:m(),mouse:m(),lightningFlag:m(),formationPlate:m(),animalCorpse:m(),lightning1:m(),lightning2:m(),lightning3:m(),lightning4:m(),waiting:m(),attacking:m(),walking:m(),talking:m(),exiting:m(),summonMouse:m(),recallMouse:m(),profileImg:m(),profileCold:m(),profileReading:m()},h=()=>{const e=Object.values(y),t=e.filter((e=>!e.loaded)),n=t.length;n>0?setTimeout(h,100):mo()},v="f1.jpg",x="t1.png",_="ww.jpg",I="ch.png",w="spider2.png",T="mouse.png",k="lightning_flag.png",S="formation_plate.png",b="lizard.png",O="effect_lightning_1.png",A="effect_lightning_2.png",E="effect_lightning_3.png",L="effect_lightning_4.png",C="waiting.png",M="attack.png",N="walk.png",D="take.png",R="exit.png",U="mouse_summon.png",P="mouse_recall.png",G="profile.png",B="profile_cold.png",H="profile_reading.png";function $(){p(y.floor,v),p(y.cave,x),p(y.w2,_),p(y.character,I),p(y.spider,w),p(y.mouse,T),p(y.lightningFlag,k),p(y.formationPlate,S),p(y.animalCorpse,b),p(y.lightning1,O),p(y.lightning2,A),p(y.lightning3,E),p(y.lightning4,L),p(y.waiting,C),p(y.attacking,M),p(y.walking,N),p(y.talking,D),p(y.exiting,R),p(y.summonMouse,U),p(y.recallMouse,P),p(y.profileImg,G),p(y.profileCold,B),p(y.profileReading,H),h()}n(7658);const q="rgba(255, 98, 164, 0.3)",j="rgba(143, 50, 168, 0.3)",Y="rgb(20, 19, 242, 0.3)";var z,F,W,V,Z,K;(function(e){e["SQUARE"]="square",e["ROUND"]="round"})(z||(z={})),function(e){e[e["NORMAL"]=0]="NORMAL",e[e["STANDING"]=1]="STANDING",e[e["OVERSIZED"]=2]="OVERSIZED"}(F||(F={})),function(e){e[e["TOOLTIP"]=0]="TOOLTIP",e[e["DIALOG"]=1]="DIALOG"}(W||(W={})),function(e){e["LEFT"]="left",e["BOTTOM_RIGHT"]="bottom-right",e["BOTTOM"]="bottom"}(V||(V={})),function(e){e["CANVAS"]="canvas",e["ACTION"]="action"}(Z||(Z={})),function(e){e[e["NORMAL"]=0]="NORMAL",e[e["FORMATION"]=1]="FORMATION",e[e["FLAG"]=2]="FLAG"}(K||(K={}));const J=(0,d.iH)([]),Q=()=>J.value,X=(e,t)=>{J.value.push({type:e,at:t})},ee=e=>J.value.splice(J.value.findIndex((t=>t.at.x===e.x&&t.at.y===e.y)),1)[0];var te,ne=n(7327);(function(e){e[e["LIGHTNING"]=0]="LIGHTNING"})(te||(te={}));let oe=[];const ae=(e,t,n)=>{oe.find((t=>t.at.x===e.x&&t.at.y===e.y))||oe.push({at:e,type:t,source:n})},ie=e=>{oe=oe.filter((t=>!(t.source.x===e.x&&t.source.y===e.y)))},re=e=>oe.filter((t=>t.source.x===e.x&&t.source.y===e.y)),le=(0,d.iH)([]),se=(0,d.iH)(0);function ce(){se.value++,se.value>=le.value.length&&(se.value=0)}function ue(){return le.value[se.value]}function ge(e){const t=le.value.findIndex((t=>t.name===e));return t>0}function fe(e){console.log(`removing unit ${e}`);const t=le.value.findIndex((t=>t.name===e));t>0&&le.value.splice(t,1),ce(),console.log(`turn stack: ${JSON.stringify(le.value)}`)}function de(e){le.value.push(e)}function me(){le.value=[]}function pe(){return le.value}const ye=(e,t)=>e.x===t.x&&e.y===t.y;var he;(function(e){e["BROKEN"]="Broken",e["IDLE"]="Idle",e["ALIVE"]="Alive"})(he||(he={}));const ve=(0,d.iH)([]),xe=(e,t,n)=>{const o={title:e,at:t,type:n,corners:{},status:he.IDLE};o.corners=Ce(t),o.corners.TL&&o.corners.TR&&o.corners.BL&&o.corners.BR||(o.status=he.BROKEN),ve.value.push(o),console.log(`formations: ${JSON.stringify(ve.value)}`)},_e=()=>{for(const e of ve.value)e.corners=Ce(e.at),e.corners.TL&&e.corners.TR&&e.corners.BL&&e.corners.BR?e.status=he.IDLE:e.status=he.BROKEN},Ie=e=>{ve.value.splice(ve.value.findIndex((t=>ye(t.at,e))))},we=()=>ve.value.length>0,Te=()=>ve.value,ke=e=>{const t=ve.value.find((t=>ye(t.at,e)));t&&(t.status=he.ALIVE,Ee(t),console.log(`adding to stack formation: ${t.title}`),de({name:"Lightning Array",at:t.at,energy:1,movement:1,autoMove:()=>{console.log("formation's turn"),Pn().qi-=2;const e=re(t.at);for(const t of e){const e=Hn(t.at);e&&(console.log(`attacking unit at ${e.at.x}, ${e.at.y}`),zn({power:20,name:"lightning"},t.at))}return!0}}))},Se=e=>{const t=e.corners?.TL?.at;if(t){const n=e.at;for(let e=t.x;e<n.x+1;e++)for(let o=t.y;o<n.y+1;o++)ae({x:e,y:o},te.LIGHTNING,n)}},be=e=>{const t=e.corners?.TR?.at;if(t){const n=e.at;for(let e=n.x;e<t.x+1;e++)for(let o=t.y;o<n.y+1;o++)ae({x:e,y:o},te.LIGHTNING,n)}},Oe=e=>{const t=e.corners?.BL?.at;if(t){const n=e.at;for(let e=t.x;e<n.x+1;e++)for(let o=n.y;o<t.y+1;o++)ae({x:e,y:o},te.LIGHTNING,n)}},Ae=e=>{const t=e.corners?.BR?.at;if(t){const n=e.at;for(let e=n.x;e<t.x+1;e++)for(let o=n.y;o<t.y+1;o++)ae({x:e,y:o},te.LIGHTNING,n)}},Ee=e=>{Se(e),be(e),Oe(e),Ae(e)},Le=e=>{const t=ve.value.find((t=>ye(t.at,e)));t&&(t.status=he.IDLE,ie(e),t&&(console.log(`removing from stack formation: ${t.title}`),fe(t.title)))},Ce=e=>{const t={};for(const n of Q())if(n.type.category===K.FLAG){const o=n.at.x-e.x,a=n.at.y-e.y;if(Math.abs(o)===Math.abs(a)){const e=JSON.parse(JSON.stringify(n.at)),i=Math.abs(o);o<0&&a<0?t.TL={at:e,dist:i}:o>0&&a<0?t.TR={at:e,dist:i}:o<0&&a>0?t.BL={at:e,dist:i}:o>0&&a>0&&(t.BR={at:e,dist:i})}}return t};var Me;(function(e){e[e["EMPTY_SPACE"]=0]="EMPTY_SPACE",e[e["ENEMY_UNIT"]=1]="ENEMY_UNIT",e[e["WALL"]=2]="WALL",e[e["ITEM"]=3]="ITEM"})(Me||(Me={}));const Ne=e=>0===Go[e.y][e.x]&&!Nn.some((t=>ye(t.at,e))),De=e=>0===Go[e.y][e.x]&&Nn.some((t=>ye(t.at,e)&&t.team===Mn.MONSTER)),Re=e=>0!==Go[e.y][e.x]&&!Nn.some((t=>ye(t.at,e))),Ue=e=>Q().some((t=>t.at.x===e.x&&t.at.y===e.y));function Pe(e,t){const n=t??Me.EMPTY_SPACE;return Be(e,[],n)}const Ge=(e,t)=>{switch(t){case Me.EMPTY_SPACE:return Ne(e);case Me.ENEMY_UNIT:return De(e);case Me.WALL:return Re(e);case Me.ITEM:return Ue(e)}};function Be(e,t,n){const o=[];for(let a=e.x-1;a<e.x+2;a++)for(let i=e.y-1;i<e.y+2;i++)a>=0&&a<Go[0].length&&i>=0&&i<Go.length&&Ge({x:a,y:i},n)&&!o.some((e=>e.x==a&&e.y===i))&&!t.some((e=>e.x==a&&e.y===i))&&o.push({x:a,y:i});return o}function He(e,t,n){const o=n??Me.EMPTY_SPACE,a=Pe(e,o);let i=a.map((e=>$e(e,1)));for(let r=0;r<t-1;r++){const e=i.length;for(let t=0;t<e;t++){const e=Be(i[t],i,o);i=i.concat(e.map((e=>$e(e,r+2))))}}return i}function $e(e,t){return{...e,d:t}}class qe{constructor(e){(0,ne.Z)(this,"items",[]),this.items=e}removeItem(e){e.quantity--,e?.quantity<=0&&this.items.splice(this.items.findIndex((t=>t.type.title===e.type.title)),1)}addItem(e){const t=this.items.find((t=>t.type.title===e.title));t?t.quantity++:this.items.push({type:e,quantity:1})}isEmpty(){return 0===this.items.length}}const je={img:y.lightningFlag,title:"Lightning Flag",category:K.FLAG},Ye={img:y.formationPlate,title:"Formation Plate",category:K.FORMATION},ze=e=>{console.log("perform action inventory"),Ve.value&&($n().inventory?.removeItem(Ve.value),X(Ve.value.type,e),Ve.value.type.category===K.FLAG&&_e()),(!Ve.value||Ve.value.quantity<=0)&&(Ve.value=null,Do(st))},Fe=e=>{$n().inventory?.addItem(e.type),e.type.category===K.FORMATION?Ie(e.at):e.type.category===K.FLAG&&_e()},We={label:"Inventory",img:"",range:{range:1,validator:Me.EMPTY_SPACE,colour:j},perform:e=>{Ve.value?.type.category===K.FORMATION?(xe("",e,Ve.value.type),ze(e)):ze(e)},precondition:()=>!0},Ve=(0,d.iH)(null),Ze=e=>Mo(We)&&e.type.title===Ve.value?.type.title,Ke=e=>{console.log(`click inventory item ${e.type.title}`),Ve.value=e,Do(We)};var Je;(function(e){e[e["IN_PROGRESS"]=0]="IN_PROGRESS",e[e["GAME_OVER"]=1]="GAME_OVER"})(Je||(Je={}));const Qe=(0,d.iH)(Je.IN_PROGRESS),Xe=(0,d.iH)(""),et=(0,d.iH)(""),tt="defeat",nt=()=>Xe.value,ot=()=>et.value,at=(e,t)=>{Xe.value=e,Qe.value=Je.GAME_OVER,et.value=t===tt?"defeated.jpg":"win.jpg"},it=()=>Qe.value===Je.GAME_OVER,rt={label:"Wait",img:C,perform:()=>{$n().energy=0},precondition:()=>!0},lt={label:"Attack",img:M,range:{range:1,validator:Me.ENEMY_UNIT,colour:j},perform:e=>{const t=Pn();zn(t,e),$n().energy=0},precondition:()=>!0},st={label:"Walk",img:N,range:{range:()=>$n().energy,validator:Me.EMPTY_SPACE,colour:q},perform:e=>{$n().at=JSON.parse(JSON.stringify(e)),$n().energy-=e.d},precondition:()=>!0},ct={label:"Pick Up",img:D,range:{range:1,validator:Me.ITEM,colour:q},perform:e=>{const t=ee(e);Fe(t)},precondition:()=>He($n().at,1,Me.ITEM).length>0},ut={label:"Exit Level",img:R,corners:z.SQUARE,perform:()=>at("Completed level!",""),precondition:()=>!Bn()},gt=e=>({name:"Mouse",img:y.mouse,profileImg:"mouse_profile.png",at:e,hp:1,armour:0,qi:0,power:0,team:Mn.PLAYER,movement:4,energy:4,actions:[rt,st],battleDetails:{center:85,rebound:105,top:85,height:80,image:"mouse.png"}}),ft="Spirit Friend",dt="deployed",mt={label:ft,img:U,range:{range:1,validator:Me.EMPTY_SPACE,colour:j},meta:{[dt]:!1},perform(e){Rn(gt(e)),this.meta[dt]=!0,$n().energy=0},precondition(){return!1===this.meta[dt]}},pt={label:"Recall",img:P,perform(){console.log("perform recall"),Un("Mouse");const e=$n().actions?.find((e=>e.label===ft));e&&(e.meta[dt]=!1),$n().energy=0},precondition(){return ge("Mouse")}},yt="Azeena",ht=e=>({name:yt,img:y.character,imgType:F.STANDING,profileImg:"player_profile.png",at:e,hp:2,armour:0,qi:60,power:2,team:Mn.PLAYER,movement:2,energy:2,inventory:new qe([{type:je,quantity:4},{type:Ye,quantity:1}]),actions:[mt,pt,ct,lt,rt,st,ut],battleDetails:{center:70,rebound:100,top:30,height:150,image:"ch.png"}});let vt=[];function xt(e,t){$n().at.x=e,$n().at.y=t}function _t(){vt=[]}const It="Spider Bait",wt={img:y.animalCorpse,title:It,category:K.NORMAL};function Tt(e,t){return e.x>=t.x-1&&e.x<=t.x+1&&e.y>=t.y-1&&e.y<=t.y+1&&!(e.x===t.x&&e.y===t.y)}function kt(e){const t=[];for(let n=0;n<e.length;n++)for(let o=0;o<e[0].length;o++)e[n][o]&&0===Go[n][o]&&t.push({x:o,y:n});return t}function St(e,t,n,o){const a=t.filter((t=>e[t.y][t.x]&&0===Go[t.y][t.x])),i=kt(e),r=i.filter((e=>Tt(e,n)));let l={x:-1,y:-1},s={x:-1,y:-1},c=-1;for(const u of r)for(const e of a){const t=Math.abs(u.x-e.x)+Math.abs(u.y-e.y);(-1===c||c>t)&&(c=t,l=u,s=e)}return s}const bt=(e,t)=>{zn(e,t),e.energy=0,e.meta&&(e.meta.target=null)},Ot=(e,t)=>{if(e.meta){const n=Pn();if(n&&t[n.at.y][n.at.x])return void(e.meta.target=n.at);const o=Q().filter((e=>e.type.title===It));for(const a of o)if(t[a.at.y][a.at.x])return void(e.meta.target=a.at)}},At=(e,t,n)=>{const o=He(e.at,1),a=St(n,o,t,e.at);console.log(`closest is ${a.x}, ${a.y}`),-1!==a.x&&-1!==a.y?(console.log(`CHARGE from ${e.at.x}, ${e.at.y} to ${a.x}, ${a.y}`),xt(a.x,a.y),e.energy--):e.meta&&(e.meta.target=null)},Et=e=>{const t=He(e.at,1),n=Math.floor(Math.random()*t.length),o=t[n].x,a=t[n].y;xt(o,a),e.energy=0},Lt=e=>{console.log("boss move");let t=jo([e]);return Ot(e,t),e.meta&&null!=e.meta.target?Tt(e.at,e.meta.target)?(console.log("attacking"),bt(e,e.meta.target)):(console.log("charging"),At(e,e.meta.target,t)):(console.log("idling"),Et(e)),t=jo([e]),Ot(e,t),e.energy<=0},Ct=e=>({name:"Turqoise Spider",img:y.spider,imgType:F.OVERSIZED,profileImg:"spider_profile.png",at:e,hp:2,armour:10,qi:0,power:10,team:Mn.MONSTER,movement:8,energy:8,actions:[],meta:{target:null},autoMove(){return Lt(this)},battleDetails:{center:35,rebound:55,top:40,height:180,image:"spider2.png"}}),Mt="Azeena",Nt=[{name:Mt,speech:"'Brrr... it's colder in here than I expected.'",profileImg:B},{name:Mt,speech:"'According to the book, there are tens of thousands of these caves hidden in the north-western mountains that encircle the desert.'",profileImg:H},{name:Mt,speech:"'They are the remains of an ancient civilization that disappeared a long time ago and are now inhabited by monsters.'",profileImg:H},{name:Mt,speech:"'This one should just be the lair of a giant spider though. Even though it's tough, with a little bit of skill, I should be able to take it out.'",profileImg:G}],Dt={name:"movement guide",type:W.TOOLTIP,tooltip:{text:"Let's explore! I can move here!",direction:V.LEFT,location:{top:290,left:240},target:Z.CANVAS,targetName:Z.CANVAS},ready:()=>!0,finished:()=>!ye(Pn().at,{x:0,y:4})},Rt=()=>Q().some((e=>e.type.title===It&&Bo[e.at.y][e.at.x])),Ut={name:"bait dialog",type:W.DIALOG,dialog:[{name:Mt,speech:"'Are those dead lizards?'",profileImg:G},{name:Mt,speech:"'Apparantly spiders like to eat lizards. Maybe I can use them as bait?'",profileImg:H}],ready:Rt,finished:()=>!0},Pt={name:"bait tooltip",type:W.TOOLTIP,tooltip:{text:"Move within range of the dead lizards",direction:V.LEFT,location:{top:160,left:240},target:Z.CANVAS,targetName:Z.CANVAS},ready:Rt,finished:ct.precondition},Gt={name:"pickup tooltip",type:W.TOOLTIP,tooltip:{text:"Click the 'take' action and then choose an item to take",direction:V.BOTTOM,location:{top:-100,left:0},width:260,target:Z.ACTION,targetName:"Pick Up"},ready:ct.precondition,finished:()=>$n()?.inventory?.items.some((e=>e.type.title===It))??!1},Bt={name:"spy dialog",type:W.DIALOG,dialog:[{name:Mt,speech:"'This place is scary. I shouldn't just walk around aimlessly like this.'",profileImg:G},{name:Mt,speech:"'I know. I can summon my spirit friend. She's a mouse, and whatever she can see, I can see.'",profileImg:G}],ready:()=>$n().at.x>=4,finished:()=>!0},Ht={name:"spy tooltip",type:W.TOOLTIP,tooltip:{text:"Click the 'summon' action to summon my spirit friend.",direction:V.BOTTOM,location:{top:-100,left:0},width:260,target:Z.ACTION,targetName:ft},ready:()=>$n().at.x>=4,finished:()=>Gn().some((e=>"Mouse"===e.name))},$t=()=>Nn.some((e=>"Turqoise Spider"===e.name&&Bo[e.at.y][e.at.x])),qt={name:"spider dialog",type:W.DIALOG,dialog:[{name:Mt,speech:"'That's the spider! I need to be careful. There's no way I could defeat that thing by just charging in.'",profileImg:G},{name:Mt,speech:"'Lucky I bought materials for laying a formation. According to the book, I need to place a formation plate in the center of a large area and place a lightning flags at each corner.'",profileImg:H},{name:Mt,speech:"'Then I can activate the formation to release deadly lightning. Better not to get hit by that!'",profileImg:H},{name:Mt,speech:"'Okay! Let's try laying that formation plate somewhere!'",profileImg:G}],ready:$t,finished:()=>!0},jt={name:"formation plate dialog",type:W.DIALOG,dialog:[{name:Mt,speech:"'I've laid the formation plate. Now I need to put a lightning flag in one of the four corners. It shouldn't matter how far they are as long as they are on the corner...'",profileImg:H}],ready:()=>we(),finished:()=>!0},Yt={name:"formation plate dialog",type:W.DIALOG,dialog:[{name:Mt,speech:"'The formation is complete. Once I lure the spider here I can activate the formation to zap it.'",profileImg:H},{name:Mt,speech:"'Better not stand in range of the formation when it's active..!'",profileImg:G}],ready:()=>we()&&Te()[0].status===he.IDLE,finished:()=>!0},zt={name:"spider dialog",type:W.DIALOG,dialog:[{name:Mt,speech:"'I killed it! I actually killed it! I can't believe I really did it!'",profileImg:G},{name:Mt,speech:"'Phew! Now that's over, I can leave this place once I'm ready'",profileImg:G}],ready:()=>!Bn(),finished:()=>!0},Ft={name:"exit tooltip",type:W.TOOLTIP,tooltip:{text:"Click the 'exit level' action to leave the cave.",direction:V.BOTTOM_RIGHT,location:{top:-100,left:-150},width:260,target:Z.ACTION,targetName:"Exit Level"},ready:()=>!Bn(),finished:()=>it()},Wt=()=>{rn([Dt,Ut,Pt,Gt,Bt,Ht,qt,jt,Yt,zt,Ft])},Vt=!0,Zt=(0,d.iH)(Nt[0]);let Kt=[Nt[1],Nt[2],Nt[3]];const Jt=()=>void 0!==Zt.value&&Vt,Qt=()=>Zt.value,Xt=()=>{Kt.length>0?Zt.value=Kt.splice(0,1)[0]:(Zt.value=void 0,ln())},en=e=>{Kt=e,Xt()};let tn=[];const nn=(0,d.iH)(),on=()=>nn.value?.type===W.TOOLTIP&&nn.value?.tooltip&&Vt,an=()=>nn.value?.tooltip,rn=e=>{tn=e,ln()},ln=()=>{if(console.log("guide tick"),nn.value?.finished()&&(console.log("guide finished"),nn.value=void 0),!nn.value){console.log("looking for new guides");for(let e=0;e<tn.length;e++)if(console.log(`found guide ${tn[e].name}`),tn[e].ready())return console.log("ready"),nn.value=tn.splice(e,1)[0],void(nn.value.type===W.DIALOG&&nn.value.dialog&&en(nn.value.dialog))}},sn=(0,d.iH)(!1),cn=()=>sn.value,un=(e,t,n)=>{dn.damage=e,dn.attacker=t,dn.defender=n,sn.value=!0,Sn()},gn=()=>dn.attacker,fn=()=>{sn.value=!1,dn.damage=0,ln()},dn={damage:0,attacker:null,defender:null},mn=()=>dn.defender?.image,pn=()=>dn.attacker?.image,yn=200,hn=(0,d.iH)(""),vn=(0,d.iH)(""),xn=(0,d.iH)(""),_n=(0,d.iH)(""),In={top:0,height:0,center:0},wn={top:0,height:0,center:0,filter:null},Tn=()=>hn.value=`margin-left: ${In.center??0}px; margin-top: ${In.top??0}px; height: ${In.height}px`,kn=()=>vn.value=`margin-left: ${wn.center??0}px; margin-top: ${wn.top??0}px; height: ${wn.height}px;`+(wn.filter?`filter: ${wn.filter}`:""),Sn=()=>{console.log("start animation"),dn.attacker&&(In.top=dn.attacker.top,In.height=dn.attacker.height,In.center=dn.attacker.center),dn.defender&&(wn.top=dn.defender.top,wn.height=dn.defender.height,wn.center=dn.defender.center,wn.filter=null),Tn(),kn(),gn()?setTimeout(bn,2*yn):setTimeout(An,2*yn)},bn=()=>{console.log("attacker start charge"),In.center=0,Tn(),setTimeout(On,yn)},On=()=>{console.log("attacker complete charge"),In.center=dn.attacker?.center??0,Tn(),setTimeout(En,yn)},An=()=>{console.log("lightning attack"),xn.value="\n        background-color: #f2c6c6;\n        background-blend-mode: screen;\n    ",wn.filter="hue-rotate(30deg) saturate(500%) brightness(300%);",kn(),setTimeout(En,yn)},En=()=>{console.log("defender receive attack animation"),xn.value="",wn.filter="hue-rotate(0deg) saturate(500%) brightness(150%)",gn()&&(wn.center=dn.defender?.rebound??0),kn(),_n.value=`-${dn.damage}`,setTimeout(Ln,2*yn)},Ln=()=>{console.log("defender return to normal"),wn.filter=null,wn.center=dn.defender?.center??0,kn(),setTimeout(Cn,4*yn)},Cn=()=>{console.log("end animation"),_n.value="",hn.value="",vn.value="",fn()};var Mn;(function(e){e[e["PLAYER"]=0]="PLAYER",e[e["MOB"]=1]="MOB",e[e["MONSTER"]=2]="MONSTER"})(Mn||(Mn={}));let Nn=[];function Dn(){Nn=[],me(),Rn(ht({x:0,y:4})),Rn(Ct({x:2,y:7}))}function Rn(e){Nn.push(e),de(e)}function Un(e){const t=Nn.findIndex((t=>t.name===e));t>=0&&(Nn.splice(t,1),fe(e))}const Pn=()=>Nn.find((e=>e.name===yt)),Gn=()=>Nn.filter((e=>e.team===Mn.PLAYER)),Bn=()=>Nn.filter((e=>e.team===Mn.MONSTER)).length>0,Hn=e=>Nn.find((t=>t.at.x===e.x&&t.at.y==e.y)),$n=()=>ue();function qn(){if(it())return;ce();const e=$n();e.energy=e.movement,jn(e)}function jn(e){if(console.log("do move"),e.autoMove){console.log("## monster taking move (1)");const t=e.autoMove();if(!t)return void(Bo[e.at.y][e.at.x]?(console.log("## render and set timer"),mo(),setTimeout((()=>jn(e)),400)):jn(e));qn()}else Yn()}function Yn(){qo(),Do(st),mo()}function zn(e,t){const n=Nn.find((e=>ye(e.at,t)));if(n){if(n.armour>=e.power)n.armour-=e.power;else{const t=e.power-n.armour;n.armour=0,n.hp-=t}return n.hp<0&&(n.hp=0,fe(n.name),Un(n.name),n.name===yt&&at(`Defeated by ${e.name}`,tt)),un(e.power,e.battleDetails??null,n.battleDetails),void mo()}const o=Q().find((e=>e.at.x===t.x&&e.at.y===t.y));o&&ee(o.at)}const Fn=(0,d.iH)(!1),Wn={x:-1,y:-1},Vn=e=>{const t=no(),n=t.getBoundingClientRect(),o=Math.floor((e.clientX-n.left)/eo*Xn),a=Math.floor((e.clientY-n.top)/eo*Xn);Wn.x=o,Wn.y=a,mo(),Zn(Wn)},Zn=e=>{Kn()||Jn()?Fn.value=!0:Fn.value=!1},Kn=()=>vt.some((e=>e.x===Wn.x+to.x&&e.y===Wn.y+to.y)),Jn=()=>Eo.some((e=>e.x===Wn.x+to.x&&e.y===Wn.y+to.y));function Qn(){if(Jn()){const e=No(Wn.x,Wn.y);Ro({x:Wn.x+to.x,y:Wn.y+to.y,d:e.d}),$n().energy<1&&qn()}ln()}let Xn=0;const eo=100,to={x:0,y:0},no=()=>document.getElementById("myCanvas");function oo(){const e=no();Xn=window.devicePixelRatio;const t=+getComputedStyle(e).getPropertyValue("height").slice(0,-2),n=+getComputedStyle(e).getPropertyValue("width").slice(0,-2);e.setAttribute("height",""+t*Xn),e.setAttribute("width",""+n*Xn)}function ao(){const e=no();oo(),e.addEventListener("mousemove",Vn),setInterval(ro,200)}let io=1;const ro=()=>{io++,io>4&&(io=1);const e=no(),t=e.getContext("2d");if(t)for(const n of oe)yo(t,n.at)};function lo(e,t,n){e.save(),Bo[t.y][t.x]||(e.filter="brightness(0.4)"),n(),e.restore()}function so(e,t){const n=no(),o=n.getContext("2d");lo(o,t,(()=>{const n=(t.x-to.x)*eo,a=(t.y-to.y)*eo;o.drawImage(e,n,a,eo,eo)}))}function co(e,t){const n=no(),o=n.getContext("2d"),a=(t.x-to.x)*eo-eo/4,i=(t.y-to.y)*eo-eo/2;o.drawImage(e,a,i,1.5*eo,1.5*eo)}function uo(e,t){const n=no(),o=n.getContext("2d"),a=(t.x-to.x)*eo,i=(t.y-to.y)*eo;o.drawImage(e,a,i-eo/2,eo,1.5*eo)}function go(e,t,n,o){const a=no(),i=a.getContext("2d");lo(i,n,(()=>{const a=(n.x-to.x)*eo,r=(n.y-to.y)*eo;i.save(),o&&(i.globalAlpha=.8),i.drawImage(t,a,r-eo/4*3,eo,eo),i.drawImage(e,a,r+eo/4,eo,eo-eo/4),i.restore()}))}function fo(e){if(Bo[e.at.y][e.at.x]){e.imgType===F.STANDING?uo(e.img.img,e.at):e.imgType==F.OVERSIZED?co(e.img.img,e.at):so(e.img.img,e.at);const t=no(),n=t.getContext("2d"),o=(e.at.x-to.x)*eo,a=(e.at.y-to.y)*eo;n.font="25px Arial",n.fillStyle="white",n.fillText(`${e.armour}`,o+eo-90,a+eo),n.fillStyle="red",n.fillText(`${e.hp}`,o+eo-55,a+eo),n.fillStyle="yellow",n.fillText(`${e.qi}`,o+eo-30,a+eo)}}const mo=()=>{const e=no(),t=e.getContext("2d");t&&(t.clearRect(0,0,e.width,e.height),po(t))};function po(e){for(let t=0+to.y;t<Go.length;t++)for(let n=0+to.x;n<Go[0].length;n++)yo(e,{x:n,y:t})}function yo(e,t){if(Ho[t.y][t.x]){if(0===Go[t.y][t.x])so(y.floor.img,t);else if(1===Go[t.y][t.x]){const e=t.y-1>=0&&0===Go[t.y-1][t.x]&&Bo[t.y-1][t.x];e&&so(y.floor.img,t),go(y.w2.img,y.cave.img,t,e)}ko(e,t),ho(e,t),_o(t),vo(t),wo(t),To(e,t)}}function ho(e,t){ye($n().at,t)&&(e.fillStyle=Y,e.fillRect(($n().at.x-to.x)*eo,($n().at.y-to.y)*eo,eo,eo))}function vo(e){const t=Nn.find((t=>ye(t.at,e)));t&&fo(t)}function xo(e){so(e.type.img.img,e.at)}function _o(e){const t=Q().find((t=>t.at.x===e.x&&t.at.y===e.y));t&&xo(t)}function Io(e){if(e.type===te.LIGHTNING)switch(io){case 1:return so(y.lightning1.img,e.at);case 2:return so(y.lightning2.img,e.at);case 3:return so(y.lightning3.img,e.at);case 4:return so(y.lightning4.img,e.at)}}function wo(e){const t=oe.find((t=>t.at.x===e.x&&t.at.y===e.y));t&&Io(t)}function To(e,t){Wn.x===t.x&&Wn.y===t.y&&(e.lineWidth=2,e.strokeStyle="orange",e.beginPath(),e.rect(Wn.x*eo,Wn.y*eo,eo,eo),e.stroke())}function ko(e,t){Eo.some((e=>e.x===t.x&&e.y===t.y))&&(e.lineWidth=16,e.strokeStyle=Co(),e.beginPath(),e.rect((t.x-to.x)*eo+12,(t.y-to.y)*eo+12,eo-24,eo-24),e.stroke())}function So(){to.x++,mo()}function bo(){to.x>0&&(to.x--,mo())}function Oo(){to.y>0&&(to.y--,mo())}function Ao(){to.y++,mo()}let Eo=[];const Lo=(0,d.iH)(st),Co=()=>Lo.value.range?.colour,Mo=e=>Lo.value.label===e.label,No=(e,t)=>Eo.find((n=>n.x===e&&n.y===t)),Do=e=>{if(_t(),e.range){const t="number"===typeof e.range.range?e.range.range:e.range.range();Eo=He($n().at,t,e?.range.validator??Me.EMPTY_SPACE),Lo.value=e,mo()}else Lo.value=e,Ro({x:0,y:0,d:0}),console.log(`unit has ${$n().energy} remaining`),$n().energy<1&&(console.log("no energy left, next unit turn"),qn()),console.log("click action finished")},Ro=e=>{Lo.value.perform(e),(!Lo.value.precondition()||$n().energy<=0||it())&&(Lo.value=st),qo(),Do(Lo.value)};function Uo(){const e=$n();return e.actions?.filter((e=>e.precondition()))??[]}const Po=[[1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,1,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,1,0,1,1,0,0,0,0,0,1],[0,0,0,0,1,0,0,0,0,0,1],[1,1,1,1,1,0,1,0,1,0,1],[1,0,0,0,1,0,1,0,0,0,1],[1,0,0,0,1,1,1,1,1,0,1],[1,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1]];let Go=Po;let Bo=[];const Ho=[];function $o(){for(let e=0;e<Go.length;e++){Ho[e]=[];for(let t=0;t<Go[0].length;t++)Ho[e][t]=!1}}function qo(){Bo=jo(Gn(),!0)}function jo(e,t=!1){const n=[];for(let o=0;o<Go.length;o++){n[o]=[];for(let e=0;e<Go[0].length;e++)n[o][e]=!1}for(const o of e)Zo(o.at,n,t),Ko(o.at,n,t),Jo(o.at,n,t),Qo(o.at,n,t),Xo(o.at,n,t),ea(o.at,n,t),ta(o.at,n,t),na(o.at,n,t);return n}const Yo=e=>e>=0,zo=e=>e>=0,Fo=e=>e<Go[0].length,Wo=e=>e<Go.length,Vo=(e,t)=>1!==Go[t][e];function Zo(e,t,n){const o=e.y;let a=e.x;t[o][a]=!0,n&&(Ho[o][a]=!0);while(Fo(a)&&Vo(a,o))a++,t[o][a]=!0,n&&(Ho[o][a]=!0),ta({x:a,y:o},t,n),ea({x:a,y:o},t,n)}function Ko(e,t,n){const o=e.y;let a=e.x;t[o][a]=!0,n&&(Ho[o][a]=!0);while(Yo(a)&&Vo(a,o))a--,t[o][a]=!0,n&&(Ho[o][a]=!0),Xo({x:a,y:o},t,n),na({x:a,y:o},t,n)}function Jo(e,t,n){let o=e.y;const a=e.x;t[o][a]=!0,n&&(Ho[o][a]=!0);while(zo(o)&&Vo(a,o))o--,t[o][a]=!0,n&&(Ho[o][a]=!0),Xo({x:a,y:o},t,n),ta({x:a,y:o},t,n)}function Qo(e,t,n){let o=e.y;const a=e.x;t[o][a]=!0,n&&(Ho[o][a]=!0);while(Wo(o)&&Vo(a,o))o++,t[o][a]=!0,n&&(Ho[o][a]=!0),na({x:a,y:o},t,n),ea({x:a,y:o},t,n)}function Xo(e,t,n){let o=e.y,a=e.x;t[o][a]=!0,n&&(Ho[o][a]=!0);while(zo(o)&&Yo(a)&&Vo(a,o))a--,o--,t[o][a]=!0,n&&(Ho[o][a]=!0)}function ea(e,t,n){let o=e.y,a=e.x;t[o][a]=!0,n&&(Ho[o][a]=!0);while(Fo(a)&&Wo(o)&&Vo(a,o))a++,o++,t[o][a]=!0,n&&(Ho[o][a]=!0)}function ta(e,t,n){let o=e.y,a=e.x;t[o][a]=!0,n&&(Ho[o][a]=!0);while(zo(o)&&Fo(a)&&Vo(a,o))a++,o--,t[o][a]=!0,n&&(Ho[o][a]=!0)}function na(e,t,n){let o=e.y,a=e.x;t[o][a]=!0,n&&(Ho[o][a]=!0);while(Wo(o)&&Yo(a)&&Vo(a,o))a--,o++,t[o][a]=!0,n&&(Ho[o][a]=!0)}var oa=n(7139);const aa=e=>((0,r.dD)("data-v-4b1b6481"),e=e(),(0,r.Cn)(),e),ia=aa((()=>(0,r._)("span",{class:"top-corner"},null,-1))),ra=["src"],la={class:"details"},sa={class:"name"},ca={class:"stats"},ua={class:"armour"},ga=aa((()=>(0,r._)("img",{src:"icon_armour.png",class:"icon"},null,-1))),fa={class:"hp"},da=aa((()=>(0,r._)("img",{src:"icon_heart.png",class:"icon"},null,-1))),ma={class:"qi"},pa=aa((()=>(0,r._)("img",{src:"icon_qi.png",class:"icon"},null,-1))),ya=aa((()=>(0,r._)("span",{class:"bottom-corner"},null,-1)));var ha={__name:"UnitProfile",props:{unit:o.Unit,selected:Boolean},setup(e){const t=e,n=()=>!0===t.selected?"selected":"";return(e,o)=>((0,r.wg)(),(0,r.iD)("li",{class:(0,oa.C_)(n())},[ia,t.unit.profileImg?((0,r.wg)(),(0,r.iD)("img",{key:0,class:"profile",src:t.unit.profileImg},null,8,ra)):(0,r.kq)("",!0),(0,r._)("span",la,[(0,r._)("span",sa,(0,oa.zw)(t.unit.name),1),(0,r._)("span",ca,[(0,r._)("span",ua,(0,oa.zw)(t.unit.armour),1),ga,(0,r._)("span",fa,(0,oa.zw)(t.unit.hp),1),da,(0,r._)("span",ma,(0,oa.zw)(t.unit.qi),1),pa])]),ya],2))}};const va=(0,c.Z)(ha,[["__scopeId","data-v-4b1b6481"]]);var xa=va;const _a={id:"turnStack"};var Ia={__name:"TurnStack",setup(e){const t=()=>pe(),n=e=>$n().name===e.name;return(e,o)=>((0,r.wg)(),(0,r.iD)("ul",_a,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t(),((e,t)=>((0,r.wg)(),(0,r.iD)(r.HY,{key:t},[n(e)?((0,r.wg)(),(0,r.j4)(xa,{key:0,unit:e,selected:!0},null,8,["unit"])):(0,d.SU)(Bo)[e.at.y][e.at.x]?((0,r.wg)(),(0,r.j4)(xa,{key:1,unit:e,selected:!1},null,8,["unit"])):(0,r.kq)("",!0)],64)))),128))]))}};const wa=(0,c.Z)(Ia,[["__scopeId","data-v-6864ebbc"]]);var Ta=wa;const ka=e=>((0,r.dD)("data-v-75c8e7bd"),e=e(),(0,r.Cn)(),e),Sa=ka((()=>(0,r._)("img",{src:"player_profile.png"},null,-1)));var ba={__name:"ToolTip",props:{target:Z,name:String},setup(e){const t=e,n=()=>on()&&!Jt()&&an().target===t.target&&an().targetName===t.name,o=()=>`top: ${an().location.top}px; left: ${an().location.left}px; width: ${an().width??200}px`;return(e,t)=>n()?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"guide",style:(0,oa.j5)(o())},[Sa,(0,r._)("span",null,(0,oa.zw)((0,d.SU)(an)().text),1),(0,r._)("span",{class:(0,oa.C_)(["arrow",(0,d.SU)(an)().direction])},null,2)],4)):(0,r.kq)("",!0)}};const Oa=(0,c.Z)(ba,[["__scopeId","data-v-75c8e7bd"]]);var Aa=Oa;const Ea=["src"];var La={__name:"ActionButton",props:{action:{type:a.Action,required:!0}},setup(e){const t=e,n=()=>["action",Mo(t.action)?"selected":"",t.action.corners];return(e,o)=>((0,r.wg)(),(0,r.iD)("span",{class:(0,oa.C_)(n()),onClick:o[0]||(o[0]=()=>(0,d.SU)(Do)(t.action))},[(0,r._)("img",{src:t.action.img},null,8,Ea),(0,r.Wm)(Aa,{target:"action",name:t.action.label},null,8,["name"])],2))}};const Ca=(0,c.Z)(La,[["__scopeId","data-v-0f1e618d"]]);var Ma=Ca;const Na=e=>((0,r.dD)("data-v-3b930f40"),e=e(),(0,r.Cn)(),e),Da=["onClick"],Ra=["src"],Ua={class:"quantity"},Pa=Na((()=>(0,r._)("h2",null,"Inventory",-1)));var Ga={__name:"InventoryPanel",setup(e){const t=()=>$n()?.inventory.items,n=()=>$n()?.inventory&&!$n()?.inventory.isEmpty(),o=()=>Mo(We)?"selected":"",a=e=>["item",Ze(e)?"selected":""];return(e,i)=>n()?((0,r.wg)(),(0,r.iD)("div",{key:0,id:"inventory",class:(0,oa.C_)(o())},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t(),((e,t)=>((0,r.wg)(),(0,r.iD)("span",{class:(0,oa.C_)(a(e)),key:t,onClick:t=>(0,d.SU)(Ke)(e)},[(0,r._)("img",{src:e.type.img.img.src},null,8,Ra),(0,r._)("span",Ua,(0,oa.zw)(e.quantity),1),(0,r._)("label",null,(0,oa.zw)(e.type.title),1)],10,Da)))),128)),Pa],2)):(0,r.kq)("",!0)}};const Ba=(0,c.Z)(Ga,[["__scopeId","data-v-3b930f40"]]);var Ha=Ba;const $a=e=>((0,r.dD)("data-v-76a36a10"),e=e(),(0,r.Cn)(),e),qa={key:0,id:"formations"},ja=["src"],Ya=["onClick"],za=["onClick"],Fa={key:2},Wa=$a((()=>(0,r._)("h2",null,"Formations",-1)));var Va={__name:"FormationsPanel",setup(e){return(e,t)=>(0,d.SU)(we)()?((0,r.wg)(),(0,r.iD)("div",qa,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,d.SU)(Te)(),((e,t)=>((0,r.wg)(),(0,r.iD)("span",{class:"item",key:t},[(0,r.Uk)((0,oa.zw)(e.title)+" ",1),(0,r._)("span",{class:(0,oa.C_)(["image",e.status])},[(0,r._)("img",{src:e.type.img.img.src},null,8,ja),(0,r._)("span",{class:(0,oa.C_)(["corner","TL",e.corners.TL?.dist>0?"active":""])},(0,oa.zw)(e.corners.TL?.dist),3),(0,r._)("span",{class:(0,oa.C_)(["corner","TR",e.corners.TR?.dist>0?"active":""])},(0,oa.zw)(e.corners.TR?.dist),3),(0,r._)("span",{class:(0,oa.C_)(["corner","BL",e.corners.BL?.dist>0?"active":""])},(0,oa.zw)(e.corners.BL?.dist),3),(0,r._)("span",{class:(0,oa.C_)(["corner","BR",e.corners.BR?.dist>0?"active":""])},(0,oa.zw)(e.corners.BR?.dist),3)],2),e.status===(0,d.SU)(he).IDLE?((0,r.wg)(),(0,r.iD)("button",{key:0,onClick:t=>(0,d.SU)(ke)(e.at)},"Activate",8,Ya)):e.status===(0,d.SU)(he).ALIVE?((0,r.wg)(),(0,r.iD)("button",{key:1,onClick:t=>(0,d.SU)(Le)(e.at)},"Deactivate",8,za)):((0,r.wg)(),(0,r.iD)("span",Fa,"Broken"))])))),128)),Wa])):(0,r.kq)("",!0)}};const Za=(0,c.Z)(Va,[["__scopeId","data-v-76a36a10"]]);var Ka=Za;const Ja={id:"bottomRight"},Qa={key:0,id:"actions"};var Xa={__name:"ActionButtons",setup(e){return(e,t)=>((0,r.wg)(),(0,r.iD)("div",Ja,[(0,d.SU)($n)()?((0,r.wg)(),(0,r.iD)("div",Qa,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,d.SU)(Uo)(),((e,t)=>((0,r.wg)(),(0,r.j4)(Ma,{key:t,action:e},null,8,["action"])))),128))])):(0,r.kq)("",!0),(0,r.Wm)(Ka),(0,r.Wm)(Ha)]))}};const ei=(0,c.Z)(Xa,[["__scopeId","data-v-55d81a28"]]);var ti=ei;const ni=e=>((0,r.dD)("data-v-e48b20fc"),e=e(),(0,r.Cn)(),e),oi={key:0,class:"matte"},ai={class:"dialog gameOver"},ii=ni((()=>(0,r._)("h1",null,"Game Over",-1))),ri={class:"message"},li=["src"];var si={__name:"GameOver",setup(e){return(e,t)=>(0,d.SU)(it)()&&!(0,d.SU)(cn)()?((0,r.wg)(),(0,r.iD)("div",oi,[(0,r._)("div",ai,[ii,(0,r._)("span",ri,(0,oa.zw)((0,d.SU)(nt)()),1),(0,r._)("img",{src:(0,d.SU)(ot)()},null,8,li)])])):(0,r.kq)("",!0)}};const ci=(0,c.Z)(si,[["__scopeId","data-v-e48b20fc"]]);var ui=ci;const gi={class:"matte"};function fi(e,t){return(0,r.wg)(),(0,r.iD)("div",gi,[(0,r.WI)(e.$slots,"default")])}const di={},mi=(0,c.Z)(di,[["render",fi]]);var pi=mi;const yi={class:"action modal"},hi=(0,r._)("span",{class:"top-corner"},null,-1),vi=(0,r._)("span",{class:"bottom-corner"},null,-1);var xi={__name:"BaseModal",setup(e){return(e,t)=>((0,r.wg)(),(0,r.j4)(pi,null,{default:(0,r.w5)((()=>[(0,r._)("div",yi,[hi,(0,r.WI)(e.$slots,"default"),vi])])),_:3}))}};const _i=xi;var Ii=_i;const wi=(0,d.iH)(!1),Ti=(0,d.iH)(null);let ki=null;const Si=()=>wi.value,bi=()=>Ti.value?.inputs,Oi=()=>Ti.value?.title(),Ai=()=>{wi.value=!1,Ti.value&&ki&&Ti.value.onSubmit(ki,Ti.value.inputs)},Ei=()=>{wi.value=!1},Li=["onUpdate:modelValue","placeholder"];var Ci={__name:"ActionModal",setup(e){return(e,t)=>(0,d.SU)(Si)()?((0,r.wg)(),(0,r.j4)(Ii,{key:0},{default:(0,r.w5)((()=>[(0,r._)("h1",null,(0,oa.zw)((0,d.SU)(Oi)()),1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,d.SU)(bi)(),((e,t)=>((0,r.wg)(),(0,r.iD)("fieldset",{key:t},[(0,r._)("label",null,(0,oa.zw)(e.title),1),(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t=>e.value=t,placeholder:e.name},null,8,Li),[[i.nr,e.value]])])))),128)),(0,r._)("button",{onClick:t[0]||(t[0]=(...e)=>(0,d.SU)(Ai)&&(0,d.SU)(Ai)(...e))},"Confirm"),(0,r._)("button",{onClick:t[1]||(t[1]=(...e)=>(0,d.SU)(Ei)&&(0,d.SU)(Ei)(...e))},"Cancel")])),_:1})):(0,r.kq)("",!0)}};const Mi=Ci;var Ni=Mi;const Di={id:"levelCanvas"};var Ri={__name:"LevelCanvas",setup(e){const t=()=>!0===Fn.value?"mouseHover":"";return(e,n)=>((0,r.wg)(),(0,r.iD)("div",Di,[(0,r._)("canvas",{id:"myCanvas",class:(0,oa.C_)(t()),onClick:n[0]||(n[0]=(...e)=>(0,d.SU)(Qn)&&(0,d.SU)(Qn)(...e)),onKeyup:[n[1]||(n[1]=(0,i.D2)(((...e)=>(0,d.SU)(Ao)&&(0,d.SU)(Ao)(...e)),["down"])),n[2]||(n[2]=(0,i.D2)(((...e)=>(0,d.SU)(Oo)&&(0,d.SU)(Oo)(...e)),["up"])),n[3]||(n[3]=(0,i.D2)(((...e)=>(0,d.SU)(bo)&&(0,d.SU)(bo)(...e)),["left"])),n[4]||(n[4]=(0,i.D2)(((...e)=>(0,d.SU)(So)&&(0,d.SU)(So)(...e)),["right"]))]},null,34),(0,r.Wm)(Aa,{target:"canvas",name:"canvas"})]))}};const Ui=(0,c.Z)(Ri,[["__scopeId","data-v-4b233009"]]);var Pi=Ui;const Gi=e=>((0,r.dD)("data-v-4a48c0b9"),e=e(),(0,r.Cn)(),e),Bi={class:"battleModal"},Hi=Gi((()=>(0,r._)("h1",null,"Battle",-1))),$i={class:"scene"},qi={key:0,class:"side left"},ji=["src"],Yi=["src"],zi={key:0,class:"damage"};var Fi={__name:"BattleModal",setup(e){return(e,t)=>(0,d.SU)(cn)()?((0,r.wg)(),(0,r.j4)(Ii,{key:0},{default:(0,r.w5)((()=>[(0,r._)("div",Bi,[Hi,(0,r._)("div",$i,[(0,d.SU)(gn)()?((0,r.wg)(),(0,r.iD)("div",qi,[(0,r._)("img",{src:(0,d.SU)(pn)(),style:(0,oa.j5)((0,d.SU)(hn))},null,12,ji)])):(0,r.kq)("",!0),(0,r._)("div",{class:"side right",style:(0,oa.j5)((0,d.SU)(xn))},[(0,r._)("img",{src:(0,d.SU)(mn)(),style:(0,oa.j5)((0,d.SU)(vn))},null,12,Yi),(0,d.SU)(_n)?((0,r.wg)(),(0,r.iD)("span",zi,(0,oa.zw)((0,d.SU)(_n)),1)):(0,r.kq)("",!0)],4)])])])),_:1})):(0,r.kq)("",!0)}};const Wi=(0,c.Z)(Fi,[["__scopeId","data-v-4a48c0b9"]]);var Vi=Wi,Zi={__name:"LevelContainer",setup(e){return(0,r.bv)((()=>{$(),Dn(),$o(),X(wt,{x:1,y:1}),X(wt,{x:5,y:6}),X(wt,{x:3,y:1}),Yn(),ao(),Wt()})),document.addEventListener("keydown",(e=>{switch(e.key){case"ArrowUp":return void Oo();case"ArrowDown":return void Ao();case"ArrowLeft":return void bo();case"ArrowRight":return void So()}}),!1),(e,t)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(Pi),(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(Ta),(0,r.Wm)(ti)])),_:1}),(0,r.Wm)(Ni),(0,r.Wm)(Vi),(0,r.Wm)(ui)],64))}};const Ki=Zi;var Ji=Ki;const Qi={class:"dialog"},Xi={class:"image"},er=["src"],tr={class:"text"},nr={class:"name"},or={class:"speech"};var ar={__name:"DialogModal",setup(e){const t=()=>{Xt()};return(e,n)=>(0,d.SU)(Jt)()?((0,r.wg)(),(0,r.j4)(pi,{key:0,onClick:t},{default:(0,r.w5)((()=>[(0,r._)("div",Qi,[(0,r._)("span",Xi,[(0,r._)("img",{src:(0,d.SU)(Qt)().profileImg},null,8,er)]),(0,r._)("span",tr,[(0,r._)("span",nr,(0,oa.zw)((0,d.SU)(Qt)().name),1),(0,r._)("span",or,(0,oa.zw)((0,d.SU)(Qt)().speech),1)])])])),_:1})):(0,r.kq)("",!0)}};const ir=ar;var rr=ir,lr={__name:"App",setup(e){return(e,t)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(Ji),(0,r.Wm)(rr)],64))}};const sr=lr;var cr=sr;(0,i.ri)(cr).mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,i){if(!o){var r=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],i=e[u][2];for(var l=!0,s=0;s<o.length;s++)(!1&i||r>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[s])}))?o.splice(s--,1):(l=!1,i<r&&(r=i));if(l){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[o,a,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,i,r=o[0],l=o[1],s=o[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(s)var u=s(n)}for(t&&t(o);c<r.length;c++)i=r[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},o=self["webpackChunkrpggame"]=self["webpackChunkrpggame"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(5247)}));o=n.O(o)})();
//# sourceMappingURL=app.27c77d69.js.map